<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css">

  <meta charset="utf-8">
  <title>Client Form</title>
</head>
<body>
  <h2>Submit Your Details</h2>
  <form id="clientForm">
    <input type="text" id="name" placeholder="Full Name" required><br>
    <input type="email" id="email" placeholder="Email" required><br>
    <button type="submit">Submit</button>
  </form>
<script type="module">
  import { db } from "./firebase.js";
  import { collection, addDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

  const urlParams = new URLSearchParams(window.location.search);
  const ownerUid = urlParams.get("owner");

  document.getElementById("clientForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    if (!ownerUid) {
      alert("Invalid or missing owner link!");
      return;
    }

    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;

    await addDoc(collection(db, "owners", ownerUid, "clients"), {
      name,
      email,
      submittedAt: new Date()
    });

    alert("Your information has been submitted successfully!");
    e.target.reset();
  });
</script>

</body>
</html>
